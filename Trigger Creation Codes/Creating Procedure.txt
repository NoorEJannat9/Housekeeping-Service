DELIMITER $$

CREATE PROCEDURE add_service_request(
    IN user_id INT,
    IN service_id INT,
    IN description TEXT,
    OUT request_id INT
)
BEGIN
    INSERT INTO service_requests (user_id, service_id, description, status, created_at, request_date)
    VALUES (user_id, service_id, description, 'Pending', NOW(), NOW());
    
    -- Return the ID of the newly inserted request
    SET request_id = LAST_INSERT_ID();
END$$

DELIMITER ;


CALL add_service_request(12, 3, 'Deep cleaning for the house', @new_request_id);
SELECT @new_request_id;
